# Chubby技术架构
###系统机构
#####整个系统由服务器端和客户端组成，客户通过RPC调研与服务器端通信.
---
一个典型的Chubby服务器集群由5台服务器组成（Chubby Cell）,协议采用Paxos协议。
***
通过选举来产生一个获得半数以上的服务器作为Master.
***
在产生了一个Master之后，一段时间内不会再产生新的Master(这段时间称之为Master租赁期),如果Master出现问题，剩余的服务器会进行新一轮的Master选举，继续进入租赁期。
***
集群中的每个服务器都会有数据库的副本，但是在实际中只有Master那台服务器才能对数据库进行写操作，而其他服务器都是使用Paxos协议从Master服务器上同步数据库数据的更新。
#####整个系统是如何定位到Master服务器的?




# Zookeeper与Paxos
zookeeper是hadoop的子项目发展来的，zookeeper为分布式应用提供了高效且可靠的分布式协调服务，提供了诸如统一命名服务，配置管理和分布式锁等分布式的基本服务。
---
* zookeeper整体介绍
  <hr>
  ``
  zookeeper是什么？
  zookeeper是一个典型的分布式数据一致性的解决方案，
  * 顺序一致性：从同一客户端发起的事物，最终将严格的按照客户端发起的顺序应用到zookeeper中
  * 原子性：所有事物处理的结果在整个集群中所有机器上的应用情况是一致的
  * 单一视图：zookeeper对外暴露的服务器端数据模型是一致的
  * 可靠性：一旦某个事物被zookeeper集群中的服务器处理后，并对客户端完成了响应，那么该事物引起的状态都会被记录下来。除非有新的事物对其进行了修改。
  * 实时性：zookeeper仅在一段时间内，可以保证从zookeeper集群中得到的数据是一致的。
<hr>
`-------`
* zookeeper设计目的、由来、以及它的基本概念
zookeeper致力于提供一个高性能，高可用，且具有严格的访问顺序能力的分布式协调服务
zookeeper集群的最小的机器是3台

<hr>
   
* ZAB在zookeeper中的一致性协议
<hr>
ZAB协议是支持崩溃恢复的原子广播协议
  ZAB协议白话描述：
  `---`
  ZAB协议中，所有的事物请求都交给集群中叫做Leader（Master）的服务器进行处理，当Leader或者Master服务器拿到数据后，将请求的事物事物专业术语叫做提议（Proposal）,并将提议发送给集群中的所有的Follower服务器，之后Leader服务器将等待所有follower服务器的反馈，一旦超过半数的服务器并不是所有的服务器做出了正确的反馈之后，Leader服务器将会再次向所有的Follower服务器发送Commit消息，要求将前面的proposal(提议提交)
  `---` 
`具有FIFO特性的TCP协议来进行通信，保证消息广播过程中消息接收和发送的顺序性`

### zookeeper基本概念
####集群角色
#### 会话
#### 数据节点
#### 版本
#### watcher(事件监听)
#### ACL(类似于UNIX系统的文件管理权限控制)
zookeeper可以应用在hadoop,hbase,storm,solr等越来越多的大型分布式项目中。
